name: ‚öôÔ∏è CI/CD - Frontend Applications Production
 
on:
  workflow_dispatch: {}
  push:
    branches:
      - main

permissions:
  id-token: write # Required for OIDC
  contents: read

jobs:
  # Job para o ambiente de Produ√ß√£o
  run-prd-workflow:
    if: github.ref == 'refs/heads/main'
    name: üöÄ Deploy to Production
    # A linha "environment: production" foi REMOVIDA daqui.
    # A regra de aprova√ß√£o ser√° acionada porque o workflow reutiliz√°vel
    # usa o input 'prd' para definir o ambiente internamente.
    uses: ./.github/workflows/reusable-build-deploy.yml
    with:
      environment-name: prd
    secrets:
      AWS_ROLE_TO_ASSUME: ${{ secrets.AWS_ROLE_TO_ASSUME_PRD }}
